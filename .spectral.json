{
  "functionsDir": "./spectral/functions",
  "functions": ["truthyCustomErrorMessage", "ifRequestBodyThen400ResponseRequired"],
  "extends": [["spectral:oas", "all"]],
  "formats": ["oas3"],
  "rules": {
    "info-license": "off",
    "license-url": "off",
    "tag-description": "off",
    "publiq-alphabetical-tags": {
      "description": "Tags should be sorted alphabetically",
      "given": "$",
      "then": {
        "field": "tags",
        "function": "alphabetical",
        "functionOptions": {
          "keyedBy": "name"
        }
      },
      "severity": "error"
    },
    "publiq-operation-summary": {
      "description": "Operations must have a summary",
      "given": "$paths[*][*][get,post,put,patch,delete,options,head]",
      "then": {
        "field": "summary",
        "function": "truthy"
      },
      "severity": "error"
    },
    "publiq-operation-description": {
      "description": "Operations must have a description",
      "given": "$[paths][*][get,post,put,patch,delete,options,head]",
      "then": {
        "field": "description",
        "function": "truthy"
      },
      "severity": "error"
    },
    "publiq-properties-description": {
      "given": "$..[properties][?(@.type)]",
      "then": {
        "field": "description",
        "function": "truthyCustomErrorMessage"
      },
      "severity": "error"
    },
    "publiq-requestBody-description": {
      "description": "Request bodies must have a description.",
      "given": "$[paths][*][*][requestBody]",
      "then": {
        "field": "description",
        "function": "truthy"
      },
      "severity": "error"
    },
    "publiq-response-description": {
      "description": "Responses must have a description for each content-type.",
      "given": "$[paths][*][*][responses][*]",
      "then": {
        "field": "description",
        "function": "truthy"
      },
      "severity": "error"
    },
    "publiq-request-body-400-response": {
      "description": "Requests with a body must have a response with status code 400.",
      "given": "$[paths][*][*]",
      "then": {
        "function": "ifRequestBodyThen400ResponseRequired"
      },
      "severity": "error"
    }
  }
}
